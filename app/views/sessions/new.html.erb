<% provide(:title,"log in") %>



    <!-- Google Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Passion+One' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Oxygen' rel='stylesheet' type='text/css'>
  </div>

<div class="col-md-offset-1 col-md-6">
<!--   <img src="timee-logo.jpg" class="img img-responsive" style="width: 100px"> -->
</div>

<script>

  function statusChangeCallback(response) {
    
    if (response.status === 'connected') {

    //testAPI();

    } else {

    Register();

    }
  }

  function checkLoginState() {
    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
      testAPI();
    });
  }

  window.fbAsyncInit = function() {
    FB.init({
      appId      : '263462597523022', // test ID: 955071771311591
      cookie     : true,  // enable cookies to allow the server to access 
                          // the session
      xfbml      : true,  // parse social plugins on this page
      version    : 'v2.8' // use graph api version 2.8
    });

    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });

  };

  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "https://connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));


  function testAPI() {
    
    FB.api('/me?fields=id,name,email,picture,age_range,gender', function(response) {

      window.location.replace("/fbpass?email=" + response.email + "&pass=" + response.id);

    });
  }

  function Register() {
    
    FB.api('/me?fields=id,name,email,picture,age_range,gender', function(response) {

      window.location.replace("/fb?name=" + response.name + "&email=" + response.email + "&password=" + response.id + "&gender=" + response.gender + "&age=" + response.age_range.min);
    });
  }
  
</script>


<!-- End of Facebook Login -->


<style>
 .smolFont{
  float:right;
 }
@media only screen and (max-width: 600px) {
.pleft {
  padding-left: 10px !important;
  }
.mmobile {
  margin-top: 30px;
}
 .nopadding {
  padding: 0;
  margin-top: 0 !important;
 }
 .main-center {
  padding: 10px 10px !important;
 }
 .smolFont{

  font-size: 13px;
 }
} 
@media only screen and (max-width: 380px) {
  .smolFont{
  font-size: 13px;
  margin-top: 5px;
 }
  }
.bg {
  background:url('/bg.jpg');
  font-family: 'Oxygen', sans-serif;
}
  
.main{
  margin:50px 15px;
}
hr{
  width: 10%;
  color: #fff;
}
.form-group{
  margin-bottom: 15px;
}
label{
  margin-bottom: 15px;
}
input,
input::-webkit-input-placeholder {
    font-size: 11px;
    padding-top: 3px;
}
.main-login{
  background-color: #fff;
    /* shadows and rounded borders */
    -moz-border-radius: 2px;
    -webkit-border-radius: 2px;
    border-radius: 2px;
    -moz-box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
    box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
}
.form-control {
    height: auto!important;
/*padding: 8px 12px !important;*/
}
.input-group {
    -webkit-box-shadow: 0px 2px 5px 0px rgba(0,0,0,0.21)!important;
    -moz-box-shadow: 0px 2px 5px 0px rgba(0,0,0,0.21)!important;
    box-shadow: 0px 2px 5px 0px rgba(0,0,0,0.21)!important;
}
.main-center{
  margin-top: 30px;
/*  margin: 0 auto;
  max-width: 400px;*/
    padding: 10px 40px;
  background:#f7f8f9;
      color: #000000;
    text-shadow: none;
  -webkit-box-shadow: 0px 3px 5px 0px rgba(0,0,0,0.31);
-moz-box-shadow: 0px 3px 5px 0px rgba(0,0,0,0.31);
box-shadow: 0px 3px 5px 0px rgba(0,0,0,0.31);
}
span.input-group-addon i {
    color: #f7f8f9;
    font-size: 17px;
}
.login-button{
  margin-top: 5px;
}
.login-register{
  font-size: 11px;
  text-align: center;
.nomargin {
  margin: 0 !important;
  padding: 0 !important;
  }
}
</style>
<div class="bg nopadding">
    <div class="container nopadding">
      <div class="row main">
        <div class="col-md-12">
        <div class="main-login main-center col-md-offset-3 col-md-6 nopadding">
          <img src="timee-logo.jpg" class="img img-responsive" style="width: 100px; float: left;margin-top: 35px; margin-bottom: 10px; ">
        <h5 class="text-right"><a href = "/signup">ここに登録</a></h5>
        <%= form_for(:session, url: login_path) do |f| %>
            
            <div class="form-group mmobile">
              <label for="email" class="hidden-xs">メールアドレス</label>
                <div class="input-group">
                  <span class="input-group-addon hidden-xs"><i class="fa fa-envelope fa" style="color:#948c8c" aria-hidden="true"></i></span>
                  <%= f.email_field :email, class: 'form-control', :placeholder => 'メールアドレス' %>
                </div>
            </div>

            <div class="form-group">
              <label for="password" class="hidden-xs">パスワード</label>
                <div class="input-group">
                  <span class="input-group-addon hidden-xs"><i class="fa fa-lock fa-lg" style="color:#948c8c" aria-hidden="true"></i></span>
                   <%= f.password_field :password, class: 'form-control', :placeholder => 'パスワード' %>
                </div>
            </div>

             <div class="form-group"> 
                <%= f.label :remember_me do %>
                <%= f.check_box :remember_me %>
                <span class="smolFont">ログイン状態を保存する</span>
                <% end %>
            </div>
           <div class="form-group">    
            <%= link_to "パスワードを忘れた方", new_password_reset_path, { :class => "smolFont" }  %>
            </div>
            <div class="form-group">   
            <%= f.submit "ログイン", class: "btn btn-primary btn-md", :value => "ログイン" %>
            </div>
            
          <div class="text-center" style="margin-top: 20px; margin-bottom: 20px;">
          <div class="fb-login-button" data-max-rows="1" data-size="large" data-show-faces="false" data-auto-logout-link="false" data-button-type="continue_with" data-use-continue-as="true" id="fb1" scope="public_profile,email" onlogin="checkLoginState();"></div>
          </div>

          <div class="col-md-12" style="margin-bottom: 20px;">
          <a href="https://api.instagram.com/oauth/authorize/?client_id=40121d95c810426f8138deb395cff7fc&redirect_uri=http://localhost:3000/login_insta&response_type=token"><img src="instagram.png" style="height: 65px;" class="center-block"></a>
          </div>

          </form>
        </div>

      </div>
      </div>
    </div>

</div>

<% end %>